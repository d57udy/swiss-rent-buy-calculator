{
  "tests": [
    {
      "name": "Backend Validation Test",
      "description": "Validates 8,415 calculations against moneyland.ch data + auto-calculations",
      "script": "backend-validation-test.js",
      "timeout": 300000,
      "critical": true,
      "status": "PASSED",
      "exitCode": 0,
      "duration": 220,
      "output": "🧮 Swiss Rent vs Buy Calculator - Backend Validation Test\n============================================================\n📂 Loading test data from: /Users/roland.faustlin/Documents/Syncthing/towerSync/MortgageMoneylandParamSweep/swiss-rent-buy-calculator/output-002.csv\n✅ Loaded 8415 test cases from moneyland.ch data\n\n🔍 Running validation tests...\n\n✅ Test 1: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0% yield\n   Result: BUY +CHF 472,454\n   vs ML:  BUY +CHF 472,454\n\n✅ Test 2: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0% yield\n   Result: BUY +CHF 574,735\n   vs ML:  BUY +CHF 574,735\n\n✅ Test 3: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0% yield\n   Result: BUY +CHF 681,699\n   vs ML:  BUY +CHF 681,699\n\n✅ Test 4: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0% yield\n   Result: BUY +CHF 793,536\n   vs ML:  BUY +CHF 793,536\n\n✅ Test 5: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0% yield\n   Result: BUY +CHF 910,443\n   vs ML:  BUY +CHF 910,443\n\n✅ Test 6: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0.5% yield\n   Result: BUY +CHF 460,032\n   vs ML:  BUY +CHF 460,032\n\n✅ Test 7: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0.5% yield\n   Result: BUY +CHF 562,313\n   vs ML:  BUY +CHF 562,313\n\n✅ Test 8: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0.5% yield\n   Result: BUY +CHF 669,277\n   vs ML:  BUY +CHF 669,277\n\n✅ Test 9: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0.5% yield\n   Result: BUY +CHF 781,114\n   vs ML:  BUY +CHF 781,114\n\n✅ Test 10: PASSED\n   Parameters: CHF 2,000,000, 0.9% mortgage, 0.5% yield\n   Result: BUY +CHF 898,021\n   vs ML:  BUY +CHF 898,021\n\n✅ Progress: 1000 tests completed (1000 passed, 0 failed)\n✅ Progress: 2000 tests completed (2000 passed, 0 failed)\n✅ Progress: 3000 tests completed (3000 passed, 0 failed)\n✅ Progress: 4000 tests completed (4000 passed, 0 failed)\n✅ Progress: 5000 tests completed (5000 passed, 0 failed)\n✅ Progress: 6000 tests completed (6000 passed, 0 failed)\n✅ Progress: 7000 tests completed (7000 passed, 0 failed)\n✅ Progress: 8000 tests completed (8000 passed, 0 failed)\n📊 VALIDATION SUMMARY\n========================================\nTotal Tests:     8415\nPassed Tests:    8415 (100.0%)\nFailed Tests:    0 (0.0%)\n\n🎯 ACCURACY ANALYSIS (Passed Tests):\n   Average Absolute Error: CHF 0.02\n   Maximum Absolute Error: CHF 0.05\n   Average Relative Error: 0.0000%\n   Accuracy: 100.0000%\n\n🎉 ALL TESTS PASSED! 🎉\n\n🔧 ADDITIONAL TEST: AUTO-CALCULATION VALIDATION\n────────────────────────────────────────────────────────────\n⚡ QUICK AUTO-CALCULATION VALIDATION\n==================================================\nTesting auto-calculation scaling for CHF 1.5M property...\n✅ Auto-calculation scaling verification PASSED\n✅ Maintenance costs scale at 1.25% of purchase price\n✅ Down payments scale at 20% of purchase price\n✅ Parameter sweeps and max-bid calculations will work correctly\n\n✅ Auto-calculation systems validated successfully\n✅ Parameter sweeps and max-bid calculations will work correctly\n",
      "error": "",
      "startTime": "2025-08-02T13:53:03.166Z",
      "endTime": "2025-08-02T13:53:03.386Z"
    },
    {
      "name": "Auto-Calculation Consistency Test",
      "description": "Tests frontend auto-calculation consistency across realistic scenarios",
      "script": "test-auto-calculation-consistency.js",
      "timeout": 180000,
      "critical": true,
      "status": "PASSED",
      "exitCode": 0,
      "duration": 7209,
      "output": "🔧 AUTO-CALCULATION CONSISTENCY TEST\n======================================================================\nTesting automatic parameter calculations across UI, backend, and sweeps\n\n📋 SCENARIO 1: Mid-range Property\n──────────────────────────────────────────────────\n🧮 TESTING AUTO-CALCULATIONS:\n  Purchase Price: CHF 1,500,000\n  Monthly Rent: CHF 4,200\n  Mortgage Rate: 1.8%\n\n📊 AUTO-CALCULATION COMPARISON:\n────────────────────────────────────────────────────────────\nParameter                    | UI Value       | Expected      | Match\n────────────────────────────────────────────────────────────\nDown Payment                 | CHF 300,000  | CHF 300,000 | ✅\nMaintenance Costs            | CHF 18,750   | CHF 18,750  | ✅\nAnnual Amortization          | CHF 80,000   | CHF 80,000  | ✅\nImputed Rental Value         | CHF 32,760   | CHF 32,760  | ✅\n────────────────────────────────────────────────────────────\n\n🎯 CALCULATION RESULT COMPARISON:\n──────────────────────────────────────────────────\nUI Decision:      BUY\nBackend Decision: BUY\nDecision Match:   ✅\nUI Value:         CHF 727,183\nBackend Value:    CHF 727,183.062\nValue Match:      ✅ (diff: CHF 0.062)\n\n✅ SCENARIO PASSED - All auto-calculations and final results match\n\n📋 SCENARIO 2: High-end Property\n──────────────────────────────────────────────────\n🧮 TESTING AUTO-CALCULATIONS:\n  Purchase Price: CHF 2,500,000\n  Monthly Rent: CHF 6,800\n  Mortgage Rate: 2.1%\n\n📊 AUTO-CALCULATION COMPARISON:\n────────────────────────────────────────────────────────────\nParameter                    | UI Value       | Expected      | Match\n────────────────────────────────────────────────────────────\nDown Payment                 | CHF 500,000  | CHF 500,000 | ✅\nMaintenance Costs            | CHF 31,250   | CHF 31,250  | ✅\nAnnual Amortization          | CHF 111,111  | CHF 111,111 | ✅\nImputed Rental Value         | CHF 53,040   | CHF 53,040  | ✅\n────────────────────────────────────────────────────────────\n\n🎯 CALCULATION RESULT COMPARISON:\n──────────────────────────────────────────────────\nUI Decision:      BUY\nBackend Decision: BUY\nDecision Match:   ✅\nUI Value:         CHF 1,341,579\nBackend Value:    CHF 1,341,579.348\nValue Match:      ✅ (diff: CHF 0.348)\n\n✅ SCENARIO PASSED - All auto-calculations and final results match\n\n📋 SCENARIO 3: Entry-level Property\n──────────────────────────────────────────────────\n🧮 TESTING AUTO-CALCULATIONS:\n  Purchase Price: CHF 900,000\n  Monthly Rent: CHF 2,800\n  Mortgage Rate: 1.5%\n\n📊 AUTO-CALCULATION COMPARISON:\n────────────────────────────────────────────────────────────\nParameter                    | UI Value       | Expected      | Match\n────────────────────────────────────────────────────────────\nDown Payment                 | CHF 180,000  | CHF 180,000 | ✅\nMaintenance Costs            | CHF 11,250   | CHF 11,250  | ✅\nAnnual Amortization          | CHF 60,000   | CHF 60,000  | ✅\nImputed Rental Value         | CHF 21,840   | CHF 21,840  | ✅\n────────────────────────────────────────────────────────────\n\n🎯 CALCULATION RESULT COMPARISON:\n──────────────────────────────────────────────────\nUI Decision:      BUY\nBackend Decision: BUY\nDecision Match:   ✅\nUI Value:         CHF 558,824\nBackend Value:    CHF 558,824.185\nValue Match:      ✅ (diff: CHF 0.185)\n\n✅ SCENARIO PASSED - All auto-calculations and final results match\n\n🔄 TESTING PARAMETER SWEEP AUTO-CALCULATIONS...\n────────────────────────────────────────────────────────────\nTesting price: CHF 1,200,000\n  Expected maintenance: CHF 15,000\n  Expected down payment: CHF 240,000\n  Expected amortization: CHF 64,000\n  Expected imputed rental: CHF 35,100\nTesting price: CHF 1,500,000\n  Expected maintenance: CHF 18,750\n  Expected down payment: CHF 300,000\n  Expected amortization: CHF 80,000\n  Expected imputed rental: CHF 35,100\nTesting price: CHF 2,000,000\n  Expected maintenance: CHF 25,000\n  Expected down payment: CHF 400,000\n  Expected amortization: CHF 106,667\n  Expected imputed rental: CHF 35,100\n📊 AUTO-CALCULATION TEST SUMMARY\n==================================================\nTotal Scenarios:     3\nPassed Scenarios:    3 (100.0%)\nFailed Scenarios:    0 (0.0%)\n\n🎉 ALL AUTO-CALCULATION TESTS PASSED!\n✅ Frontend auto-calculations are consistent with Swiss standards\n✅ Backend calculations work correctly with auto-calculated parameters\n✅ Parameter sweep auto-calculations scale properly\n",
      "error": "",
      "startTime": "2025-08-02T13:53:03.386Z",
      "endTime": "2025-08-02T13:53:10.595Z"
    },
    {
      "name": "Realistic Parameter Validation",
      "description": "Tests realistic Swiss parameters with frontend-backend alignment",
      "script": "realistic-parameter-validation.js",
      "timeout": 120000,
      "critical": false,
      "status": "PASSED",
      "exitCode": 0,
      "duration": 11422,
      "output": "🎯 REALISTIC PARAMETER VALIDATION TEST\n======================================================================\nTesting 5 realistic Swiss real estate scenarios\nComparing frontend UI calculations with backend validation\n\n🧮 SCENARIO 1:\n──────────────────────────────────────────────────\nGenerated Parameters:\n  Purchase Price: CHF 1,638,056\n  Down Payment: CHF 375,118 (22.9%)\n  Mortgage Rate: 1.48%\n  Monthly Rent: CHF 870\n  Property Appreciation: 1.97%\n  Investment Yield: 1.81%\n  Marginal Tax Rate: 31.11%\n  Term: 23 years\n  Maintenance Rate: 1.5%\n\nResults Comparison:\n  UI Result:      BUY CHF 949,990\n  Backend Result: BUY CHF 397,452.425\n  Decision Match: ✅\n  Value Diff:     CHF 552,537.575\n  Overall Match:  ❌ FAIL\n  UI Maintenance Rate: 1.250%\n\n🧮 SCENARIO 2:\n──────────────────────────────────────────────────\nGenerated Parameters:\n  Purchase Price: CHF 1,475,279\n  Down Payment: CHF 392,630 (26.6%)\n  Mortgage Rate: 1.43%\n  Monthly Rent: CHF 776\n  Property Appreciation: 0.73%\n  Investment Yield: 5.36%\n  Marginal Tax Rate: 28.10%\n  Term: 14 years\n  Maintenance Rate: 1.1%\n\nResults Comparison:\n  UI Result:      BUY CHF 59,476\n  Backend Result: RENT CHF 59,475.95\n  Decision Match: ❌\n  Value Diff:     CHF 0.05\n  Overall Match:  ❌ FAIL\n  UI Maintenance Rate: 1.250%\n\n🧮 SCENARIO 3:\n──────────────────────────────────────────────────\nGenerated Parameters:\n  Purchase Price: CHF 1,254,966\n  Down Payment: CHF 312,062 (24.9%)\n  Mortgage Rate: 0.89%\n  Monthly Rent: CHF 522\n  Property Appreciation: 0.59%\n  Investment Yield: 4.36%\n  Marginal Tax Rate: 29.00%\n  Term: 23 years\n  Maintenance Rate: 1.2%\n\nResults Comparison:\n  UI Result:      BUY CHF 58,768\n  Backend Result: RENT CHF 547,377.465\n  Decision Match: ❌\n  Value Diff:     CHF 488,609.465\n  Overall Match:  ❌ FAIL\n  UI Maintenance Rate: 1.250%\n\n🧮 SCENARIO 4:\n──────────────────────────────────────────────────\nGenerated Parameters:\n  Purchase Price: CHF 1,520,334\n  Down Payment: CHF 429,817 (28.3%)\n  Mortgage Rate: 1.49%\n  Monthly Rent: CHF 678\n  Property Appreciation: 0.01%\n  Investment Yield: 3.85%\n  Marginal Tax Rate: 35.08%\n  Term: 17 years\n  Maintenance Rate: 1.8%\n\nResults Comparison:\n  UI Result:      BUY CHF 146,515\n  Backend Result: RENT CHF 214,666.923\n  Decision Match: ❌\n  Value Diff:     CHF 68,151.923\n  Overall Match:  ❌ FAIL\n  UI Maintenance Rate: 1.250%\n\n🧮 SCENARIO 5:\n──────────────────────────────────────────────────\nGenerated Parameters:\n  Purchase Price: CHF 1,782,082\n  Down Payment: CHF 552,308 (31%)\n  Mortgage Rate: 1.36%\n  Monthly Rent: CHF 595\n  Property Appreciation: 0.95%\n  Investment Yield: 4.32%\n  Marginal Tax Rate: 17.56%\n  Term: 9 years\n  Maintenance Rate: 1.4%\n\nResults Comparison:\n  UI Result:      BUY CHF 93,979\n  Backend Result: RENT CHF 93,979.111\n  Decision Match: ❌\n  Value Diff:     CHF 0.111\n  Overall Match:  ❌ FAIL\n  UI Maintenance Rate: 1.250%\n\n📊 VALIDATION SUMMARY:\n==================================================\nTotal Tests:        5\nPassed Tests:       0 (0.0%)\nFailed Tests:       5 (100.0%)\n\n📈 DECISION ANALYSIS:\n──────────────────────────────\nBUY recommendations:  5 (100.0%)\nRENT recommendations: 0 (0.0%)\n\n🔧 MAINTENANCE RATE ANALYSIS:\n──────────────────────────────\nAverage Rate:  1.250%\nRate Range:    1.250% - 1.250%\nSwiss Standard: 1.250%\n\n🎯 ACCURACY ANALYSIS:\n──────────────────────────────\nAvg Value Difference: CHF 221,859.825\nMax Value Difference: CHF 552,537.575\nPrecision Level: Fair\n\n⚠️ VALIDATION ISSUES DETECTED\nFrontend and backend may have calculation differences\n",
      "error": "",
      "startTime": "2025-08-02T13:53:10.595Z",
      "endTime": "2025-08-02T13:53:22.017Z"
    },
    {
      "name": "Backend Auto-Calculation Capabilities",
      "description": "Tests backend auto-calculation scaling and break-even finding",
      "script": "test-backend-auto-calculations.js",
      "timeout": 60000,
      "critical": true,
      "status": "PASSED",
      "exitCode": 0,
      "duration": 51,
      "output": "🚀 BACKEND AUTO-CALCULATION COMPREHENSIVE TEST\n======================================================================\nTesting backend auto-calculation capability for parameter sweeps\n\n🔧 BACKEND AUTO-CALCULATION SCALING TEST\n============================================================\n📊 BASE PARAMETERS:\n  Purchase Price: CHF 1,500,000\n  Monthly Rent: CHF 4,200\n  Mortgage Rate: 2.1%\n\n🔄 TESTING AUTO-CALCULATION SCALING:\n────────────────────────────────────────────────────────────────────────────────\nPrice (CHF)    | Down Payment  | Maintenance   | Amortization  | Decision\n────────────────────────────────────────────────────────────────────────────────\n1,200,000      | CHF 240,000   | CHF 15,000   | CHF 64,000     | BUY\n1,500,000      | CHF 300,000   | CHF 18,750   | CHF 80,000     | BUY\n1,800,000      | CHF 360,000   | CHF 22,500   | CHF 96,000     | BUY\n2,200,000      | CHF 440,000   | CHF 27,500   | CHF 117,333    | BUY\n────────────────────────────────────────────────────────────────────────────────\n\n✅ SCALING VERIFICATION:\n────────────────────────────────────────\n✅ All auto-calculated parameters scale correctly\n✅ Maintenance costs: 1.25% of purchase price\n✅ Down payment: 20% of purchase price\n✅ Amortization: 80% mortgage ÷ amortization years\n\n\n🎯 BREAK-EVEN PRICE FINDING TEST\n==================================================\n🔍 Finding break-even price with auto-calculated parameters...\n  Monthly Rent: CHF 4,500\n  Mortgage Rate: 2%\n  Term: 12 years\n\n🎯 Break-even found at iteration 6\n📊 BREAK-EVEN RESULTS:\n────────────────────────────────────────\nBreak-even Price:     CHF 6,442,189\nResult Value:         CHF 439.154\nAccuracy:             ±CHF 439.154\n\n🔧 AUTO-CALCULATED PARAMETERS AT BREAK-EVEN:\n  Down Payment:       CHF 1,288,438\n  Maintenance Costs:  CHF 80,527\n  Annual Amortization: CHF 343,583\n  Imputed Rental:     CHF 35,100\n\n✅ VERIFICATION:\n  Maintenance Rate:    1.250% ✅\n  Expected Rate:       1.250%\n  Auto-calc Working:   YES\n\n📋 COMPREHENSIVE TEST SUMMARY\n==================================================\nParameter Scaling:    ✅ PASSED\nBreak-even Finding:   ✅ PASSED\nOverall Result:       ✅ PASSED\n\n🎉 ALL BACKEND AUTO-CALCULATION TESTS PASSED!\n✅ Backend correctly handles auto-calculated parameters\n✅ Auto-calculations scale properly with purchase price changes\n✅ Break-even calculations work with auto-calculated maintenance costs\n✅ Swiss standard rates (1.25% maintenance, 20% down payment) are applied correctly\n",
      "error": "",
      "startTime": "2025-08-02T13:53:22.017Z",
      "endTime": "2025-08-02T13:53:22.068Z"
    },
    {
      "name": "Complete Auto-Calculation Test Suite",
      "description": "Comprehensive auto-calculation validation across all components",
      "script": "test-complete-auto-calculations.js",
      "timeout": 240000,
      "critical": true,
      "status": "PASSED",
      "exitCode": 0,
      "duration": 7359,
      "output": "🎯 COMPLETE AUTO-CALCULATION TEST SUITE\n================================================================================\nComprehensive testing of automatic parameter calculations\nacross frontend UI, backend calculations, and parameter sweeps\n\n📱 PHASE 1: FRONTEND AUTO-CALCULATION CONSISTENCY\n────────────────────────────────────────────────────────────\n🔧 AUTO-CALCULATION CONSISTENCY TEST\n======================================================================\nTesting automatic parameter calculations across UI, backend, and sweeps\n\n📋 SCENARIO 1: Mid-range Property\n──────────────────────────────────────────────────\n🧮 TESTING AUTO-CALCULATIONS:\n  Purchase Price: CHF 1,500,000\n  Monthly Rent: CHF 4,200\n  Mortgage Rate: 1.8%\n\n📊 AUTO-CALCULATION COMPARISON:\n────────────────────────────────────────────────────────────\nParameter                    | UI Value       | Expected      | Match\n────────────────────────────────────────────────────────────\nDown Payment                 | CHF 300,000  | CHF 300,000 | ✅\nMaintenance Costs            | CHF 18,750   | CHF 18,750  | ✅\nAnnual Amortization          | CHF 80,000   | CHF 80,000  | ✅\nImputed Rental Value         | CHF 32,760   | CHF 32,760  | ✅\n────────────────────────────────────────────────────────────\n\n🎯 CALCULATION RESULT COMPARISON:\n──────────────────────────────────────────────────\nUI Decision:      BUY\nBackend Decision: BUY\nDecision Match:   ✅\nUI Value:         CHF 727,183\nBackend Value:    CHF 727,183.062\nValue Match:      ✅ (diff: CHF 0.062)\n\n✅ SCENARIO PASSED - All auto-calculations and final results match\n\n📋 SCENARIO 2: High-end Property\n──────────────────────────────────────────────────\n🧮 TESTING AUTO-CALCULATIONS:\n  Purchase Price: CHF 2,500,000\n  Monthly Rent: CHF 6,800\n  Mortgage Rate: 2.1%\n\n📊 AUTO-CALCULATION COMPARISON:\n────────────────────────────────────────────────────────────\nParameter                    | UI Value       | Expected      | Match\n────────────────────────────────────────────────────────────\nDown Payment                 | CHF 500,000  | CHF 500,000 | ✅\nMaintenance Costs            | CHF 31,250   | CHF 31,250  | ✅\nAnnual Amortization          | CHF 111,111  | CHF 111,111 | ✅\nImputed Rental Value         | CHF 53,040   | CHF 53,040  | ✅\n────────────────────────────────────────────────────────────\n\n🎯 CALCULATION RESULT COMPARISON:\n──────────────────────────────────────────────────\nUI Decision:      BUY\nBackend Decision: BUY\nDecision Match:   ✅\nUI Value:         CHF 1,341,579\nBackend Value:    CHF 1,341,579.348\nValue Match:      ✅ (diff: CHF 0.348)\n\n✅ SCENARIO PASSED - All auto-calculations and final results match\n\n📋 SCENARIO 3: Entry-level Property\n──────────────────────────────────────────────────\n🧮 TESTING AUTO-CALCULATIONS:\n  Purchase Price: CHF 900,000\n  Monthly Rent: CHF 2,800\n  Mortgage Rate: 1.5%\n\n📊 AUTO-CALCULATION COMPARISON:\n────────────────────────────────────────────────────────────\nParameter                    | UI Value       | Expected      | Match\n────────────────────────────────────────────────────────────\nDown Payment                 | CHF 180,000  | CHF 180,000 | ✅\nMaintenance Costs            | CHF 11,250   | CHF 11,250  | ✅\nAnnual Amortization          | CHF 60,000   | CHF 60,000  | ✅\nImputed Rental Value         | CHF 21,840   | CHF 21,840  | ✅\n────────────────────────────────────────────────────────────\n\n🎯 CALCULATION RESULT COMPARISON:\n──────────────────────────────────────────────────\nUI Decision:      BUY\nBackend Decision: BUY\nDecision Match:   ✅\nUI Value:         CHF 558,824\nBackend Value:    CHF 558,824.185\nValue Match:      ✅ (diff: CHF 0.185)\n\n✅ SCENARIO PASSED - All auto-calculations and final results match\n\n🔄 TESTING PARAMETER SWEEP AUTO-CALCULATIONS...\n────────────────────────────────────────────────────────────\nTesting price: CHF 1,200,000\n  Expected maintenance: CHF 15,000\n  Expected down payment: CHF 240,000\n  Expected amortization: CHF 64,000\n  Expected imputed rental: CHF 35,100\nTesting price: CHF 1,500,000\n  Expected maintenance: CHF 18,750\n  Expected down payment: CHF 300,000\n  Expected amortization: CHF 80,000\n  Expected imputed rental: CHF 35,100\nTesting price: CHF 2,000,000\n  Expected maintenance: CHF 25,000\n  Expected down payment: CHF 400,000\n  Expected amortization: CHF 106,667\n  Expected imputed rental: CHF 35,100\n📊 AUTO-CALCULATION TEST SUMMARY\n==================================================\nTotal Scenarios:     3\nPassed Scenarios:    3 (100.0%)\nFailed Scenarios:    0 (0.0%)\n\n🎉 ALL AUTO-CALCULATION TESTS PASSED!\n✅ Frontend auto-calculations are consistent with Swiss standards\n✅ Backend calculations work correctly with auto-calculated parameters\n✅ Parameter sweep auto-calculations scale properly\n✅ Frontend auto-calculation tests PASSED\n\n🔧 PHASE 2: BACKEND AUTO-CALCULATION CAPABILITIES\n────────────────────────────────────────────────────────────\n🚀 BACKEND AUTO-CALCULATION COMPREHENSIVE TEST\n======================================================================\nTesting backend auto-calculation capability for parameter sweeps\n\n🔧 BACKEND AUTO-CALCULATION SCALING TEST\n============================================================\n📊 BASE PARAMETERS:\n  Purchase Price: CHF 1,500,000\n  Monthly Rent: CHF 4,200\n  Mortgage Rate: 2.1%\n\n🔄 TESTING AUTO-CALCULATION SCALING:\n────────────────────────────────────────────────────────────────────────────────\nPrice (CHF)    | Down Payment  | Maintenance   | Amortization  | Decision\n────────────────────────────────────────────────────────────────────────────────\n1,200,000      | CHF 240,000   | CHF 15,000   | CHF 64,000     | BUY\n1,500,000      | CHF 300,000   | CHF 18,750   | CHF 80,000     | BUY\n1,800,000      | CHF 360,000   | CHF 22,500   | CHF 96,000     | BUY\n2,200,000      | CHF 440,000   | CHF 27,500   | CHF 117,333    | BUY\n────────────────────────────────────────────────────────────────────────────────\n\n✅ SCALING VERIFICATION:\n────────────────────────────────────────\n✅ All auto-calculated parameters scale correctly\n✅ Maintenance costs: 1.25% of purchase price\n✅ Down payment: 20% of purchase price\n✅ Amortization: 80% mortgage ÷ amortization years\n\n\n🎯 BREAK-EVEN PRICE FINDING TEST\n==================================================\n🔍 Finding break-even price with auto-calculated parameters...\n  Monthly Rent: CHF 4,500\n  Mortgage Rate: 2%\n  Term: 12 years\n\n🎯 Break-even found at iteration 6\n📊 BREAK-EVEN RESULTS:\n────────────────────────────────────────\nBreak-even Price:     CHF 6,442,189\nResult Value:         CHF 439.154\nAccuracy:             ±CHF 439.154\n\n🔧 AUTO-CALCULATED PARAMETERS AT BREAK-EVEN:\n  Down Payment:       CHF 1,288,438\n  Maintenance Costs:  CHF 80,527\n  Annual Amortization: CHF 343,583\n  Imputed Rental:     CHF 35,100\n\n✅ VERIFICATION:\n  Maintenance Rate:    1.250% ✅\n  Expected Rate:       1.250%\n  Auto-calc Working:   YES\n\n📋 COMPREHENSIVE TEST SUMMARY\n==================================================\nParameter Scaling:    ✅ PASSED\nBreak-even Finding:   ✅ PASSED\nOverall Result:       ✅ PASSED\n\n🎉 ALL BACKEND AUTO-CALCULATION TESTS PASSED!\n✅ Backend correctly handles auto-calculated parameters\n✅ Auto-calculations scale properly with purchase price changes\n✅ Break-even calculations work with auto-calculated maintenance costs\n✅ Swiss standard rates (1.25% maintenance, 20% down payment) are applied correctly\n✅ Backend auto-calculation tests PASSED\n\n📊 OVERALL AUTO-CALCULATION ASSESSMENT\n============================================================\nTest Component                     | Status\n────────────────────────────────────────────────────────────\nFrontend UI Auto-Calculations      | ✅ PASSED\nBackend Parameter Scaling          | ✅ PASSED\nParameter Sweep Compatibility      | ✅ PASSED\nMax-Bid Calculation Support        | ✅ PASSED\n────────────────────────────────────────────────────────────\nOVERALL RESULT                     | ✅ PASSED\n\n🎉 AUTO-CALCULATION SYSTEM VERIFICATION COMPLETE!\n\n✅ CONFIRMED CAPABILITIES:\n  ➤ Frontend automatically calculates:\n    • Down Payment (20% Swiss minimum)\n    • Maintenance Costs (1.25% of purchase price)\n    • Annual Amortization (mortgage ÷ amortization years)\n    • Imputed Rental Value (65% of annual rent)\n\n  ➤ Backend properly handles auto-calculated parameters\n  ➤ Parameter sweeps scale auto-calculations with purchase price\n  ➤ Max-bid calculations use scaled maintenance costs\n  ➤ Swiss banking standards are properly applied\n\n✅ QUALITY ASSURANCE:\n  ➤ Auto-calculations are consistent between UI and backend\n  ➤ Parameter scaling maintains proper ratios\n  ➤ Financial calculations remain accurate with auto-parameters\n",
      "error": "",
      "startTime": "2025-08-02T13:53:22.068Z",
      "endTime": "2025-08-02T13:53:29.427Z"
    },
    {
      "name": "Manual Moneyland Test Cases",
      "description": "Manually collected moneyland.ch scenarios validation",
      "script": "test-moneyland-manual-cases.js",
      "timeout": 120000,
      "critical": false,
      "status": "PASSED",
      "exitCode": 0,
      "duration": 53,
      "output": "🧪 MONEYLAND.CH MANUAL TEST CASES VALIDATION\n================================================================================\nComparing manually collected moneyland.ch scenarios with our calculator\n\n✅ Loaded 10 manual test cases from moneyland.ch\n\\n📋 TEST CASE 1: High-end property, 10-year term, 2% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 2,100,000\n  Down Payment: CHF 450,000 (21.4%)\n  Monthly Rent: CHF 5,500\n  Mortgage Rate: 2%\n  Term: 10 years\n  Property Appreciation: 1%\n  Investment Yield: 3%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 343,382.062\n  Moneyland.ch:      CHF 343,382.05\n  Difference:        CHF 0.012\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -88,488.349\n  Rent Total Cost:   CHF 254,893.713\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -88,488.35\n  Rent Total Cost:   CHF 254,893.7\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.001\n  Rent Cost Diff:    CHF 0.013\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 2: Mid-range property, 8-year term, 1.8% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 1,500,000\n  Down Payment: CHF 350,000 (23.3%)\n  Monthly Rent: CHF 2,875\n  Mortgage Rate: 1.8%\n  Term: 8 years\n  Property Appreciation: 1%\n  Investment Yield: 2.8%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 226,884.568\n  Moneyland.ch:      CHF 226,884.55\n  Difference:        CHF 0.018\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -228,649.555\n  Rent Total Cost:   CHF -1,764.987\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -228,649.55\n  Rent Total Cost:   CHF -1,765\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.005\n  Rent Cost Diff:    CHF 0.013\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 3: Luxury property, 15-year term, 2.3% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 4,500,000\n  Down Payment: CHF 1,200,000 (26.7%)\n  Monthly Rent: CHF 6,800\n  Mortgage Rate: 2.3%\n  Term: 15 years\n  Property Appreciation: 1%\n  Investment Yield: 4.7%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 99,991.825\n  Moneyland.ch:      CHF 99,991.8\n  Difference:        CHF 0.025\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -900,817.324\n  Rent Total Cost:   CHF -800,825.499\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -900,817.3\n  Rent Total Cost:   CHF -800,825.5\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.024\n  Rent Cost Diff:    CHF 0.001\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 4: Lower-end property, 11-year term, 1.7% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 800,000\n  Down Payment: CHF 200,000 (25.0%)\n  Monthly Rent: CHF 2,300\n  Mortgage Rate: 1.7%\n  Term: 11 years\n  Property Appreciation: 2.3%\n  Investment Yield: 6%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 232,084.002\n  Moneyland.ch:      CHF 232,084\n  Difference:        CHF 0.002\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -225,758.08\n  Rent Total Cost:   CHF 6,325.922\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -225,758.1\n  Rent Total Cost:   CHF 6,325.9\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.02\n  Rent Cost Diff:    CHF 0.022\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 5: Premium property, 10-year term, 1.68% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 2,000,000\n  Down Payment: CHF 400,000 (20.0%)\n  Monthly Rent: CHF 4,500\n  Mortgage Rate: 1.68%\n  Term: 10 years\n  Property Appreciation: 1.6%\n  Investment Yield: 3.5%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 434,240.401\n  Moneyland.ch:      CHF 434,240.4\n  Difference:        CHF 0.001\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -331,415.686\n  Rent Total Cost:   CHF 102,824.715\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -331,415.7\n  Rent Total Cost:   CHF 102,824.7\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.014\n  Rent Cost Diff:    CHF 0.015\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 6: Ultra-luxury property, 9-year term, 2.17% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 3,500,000\n  Down Payment: CHF 150,000 (4.3%)\n  Monthly Rent: CHF 6,367\n  Mortgage Rate: 2.17%\n  Term: 9 years\n  Property Appreciation: 2.1%\n  Investment Yield: 6%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 595,644.052\n  Moneyland.ch:      CHF 595,644.05\n  Difference:        CHF 0.002\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -68,635.207\n  Rent Total Cost:   CHF 527,008.846\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -68,635.2\n  Rent Total Cost:   CHF 527,008.85\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.007\n  Rent Cost Diff:    CHF 0.004\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 7: Modest property, 13-year term, 0.96% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 500,000\n  Down Payment: CHF 150,000 (30.0%)\n  Monthly Rent: CHF 1,500\n  Mortgage Rate: 0.96%\n  Term: 13 years\n  Property Appreciation: 2.1%\n  Investment Yield: 4.96%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 26,752.23\n  Moneyland.ch:      CHF 26,752.2\n  Difference:        CHF 0.03\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -15,902.465\n  Rent Total Cost:   CHF 10,849.765\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -15,902.45\n  Rent Total Cost:   CHF 10,849.75\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.015\n  Rent Cost Diff:    CHF 0.015\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 8: Super-luxury property, 16-year term, 1.34% mortgage rate - RENT scenario\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 8,500,000\n  Down Payment: CHF 2,500,000 (29.4%)\n  Monthly Rent: CHF 7,800\n  Mortgage Rate: 1.34%\n  Term: 16 years\n  Property Appreciation: 1.1%\n  Investment Yield: 4.8%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    RENT\n  Moneyland.ch:      RENT\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 367,717.422\n  Moneyland.ch:      CHF 367,717.45\n  Difference:        CHF 0.028\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -2,800,199.923\n  Rent Total Cost:   CHF -3,167,917.345\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -2,800,199.9\n  Rent Total Cost:   CHF -3,167,917.35\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.023\n  Rent Cost Diff:    CHF 0.005\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 9: High-end property, 14-year term, 0.96% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 2,500,000\n  Down Payment: CHF 650,000 (26.0%)\n  Monthly Rent: CHF 6,000\n  Mortgage Rate: 0.96%\n  Term: 14 years\n  Property Appreciation: 1.1%\n  Investment Yield: 6%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 578,909.322\n  Moneyland.ch:      CHF 578,909.3\n  Difference:        CHF 0.022\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -628,062.317\n  Rent Total Cost:   CHF -49,152.995\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -628,062.3\n  Rent Total Cost:   CHF -49,153\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.017\n  Rent Cost Diff:    CHF 0.005\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n📋 TEST CASE 10: Premium property, 10-year term, 1.27% mortgage rate\n──────────────────────────────────────────────────────────────────────\n📊 PARAMETERS:\n  Purchase Price: CHF 2,000,000\n  Down Payment: CHF 400,000 (20.0%)\n  Monthly Rent: CHF 5,487\n  Mortgage Rate: 1.27%\n  Term: 10 years\n  Property Appreciation: 1.64%\n  Investment Yield: 5%\n\n🔍 RESULTS COMPARISON:\n──────────────────────────────────────────────────\nDecision:\n  Our Calculator:    BUY\n  Moneyland.ch:      BUY\n  Decision Match:    ✅\n\nAdvantage Amount:\n  Our Calculator:    CHF 540,727.115\n  Moneyland.ch:      CHF 540,727.1\n  Difference:        CHF 0.015\n  Advantage Match:   ✅ (tolerance: CHF 1,000)\n\nTotal Costs (Our Calculator):\n  Buy Total Cost:    CHF -338,468.599\n  Rent Total Cost:   CHF 202,258.516\n\nTotal Costs (Moneyland.ch):\n  Buy Total Cost:    CHF -338,468.6\n  Rent Total Cost:   CHF 202,258.5\n\nCost Differences:\n  Buy Cost Diff:     CHF 0.001\n  Rent Cost Diff:    CHF 0.016\n  Buy Cost Match:    ✅\n  Rent Cost Match:   ✅\n\n🎯 OVERALL ASSESSMENT: ✅ PASSED\n\\n\\n📊 MANUAL TEST CASES SUMMARY\n==================================================\nTotal Test Cases:     10\nOverall Passed:       10 (100.0%)\nDecision Matches:     10 (100.0%)\nAdvantage Matches:    10 (100.0%)\n\n🎯 ACCURACY ANALYSIS:\n──────────────────────────────\nAverage Advantage Diff: CHF 0.015\nMaximum Advantage Diff: CHF 0.03\nTolerance Used:         CHF 1,000\n\n🏁 FINAL ASSESSMENT:\n──────────────────────────────\n🎉 ALL MANUAL TEST CASES PASSED!\n✅ Our calculator perfectly matches moneyland.ch results\n✅ All decisions and calculations are accurate\n",
      "error": "",
      "startTime": "2025-08-02T13:53:29.427Z",
      "endTime": "2025-08-02T13:53:29.480Z"
    }
  ],
  "summary": {
    "total": 6,
    "passed": 6,
    "failed": 0,
    "errors": 0,
    "startTime": "2025-08-02T13:53:03.154Z",
    "endTime": "2025-08-02T13:53:29.480Z",
    "duration": 26326
  }
}